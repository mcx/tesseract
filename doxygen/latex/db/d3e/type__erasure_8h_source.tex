\hypertarget{type__erasure_8h_source}{}\doxysection{type\+\_\+erasure.\+h}
\label{type__erasure_8h_source}\index{tesseract\_common/include/tesseract\_common/type\_erasure.h@{tesseract\_common/include/tesseract\_common/type\_erasure.h}}
\mbox{\hyperlink{type__erasure_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{26 \textcolor{preprocessor}{\#ifndef TESSERACT\_COMMON\_TYPE\_ERASURE\_H}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#define TESSERACT\_COMMON\_TYPE\_ERASURE\_H}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include <typeindex>}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#include <boost/serialization/base\_object.hpp>}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#include <boost/serialization/nvp.hpp>}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#include <boost/serialization/unique\_ptr.hpp>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{serialization_8h}{tesseract\_common/serialization.h}}>}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacetesseract__common}{tesseract\_common}}}
\DoxyCodeLine{37 \{}
\DoxyCodeLine{39 \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface}{TypeErasureInterface}}}
\DoxyCodeLine{40 \{}
\DoxyCodeLine{41   \textcolor{keyword}{virtual} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_a5de1496122b116887074d49c2ce451a7}{\string~TypeErasureInterface}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43   \textcolor{comment}{// This is not required for user defined implementation}}
\DoxyCodeLine{44   \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_a5076cbe95819bf496255dcdebfb49461}{equals}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface}{TypeErasureInterface}}\& other) \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{45 }
\DoxyCodeLine{46   \textcolor{comment}{// This is not required for user defined implementation}}
\DoxyCodeLine{47   \textcolor{keyword}{virtual} std::type\_index \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_a0803153feac8946546ae375e9f037389}{getType}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{48 }
\DoxyCodeLine{49   \textcolor{comment}{// This is not required for user defined implementation}}
\DoxyCodeLine{50   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void}* \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_af30546a72e2a1870b892c6cae8503c23}{recover}}() = 0;}
\DoxyCodeLine{51 }
\DoxyCodeLine{52   \textcolor{comment}{// This is not required for user defined implementation}}
\DoxyCodeLine{53   \textcolor{keyword}{virtual} \textcolor{keyword}{const} \textcolor{keywordtype}{void}* \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_adcad91177b3d7e2666cc363ad2407b69}{recover}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{54 }
\DoxyCodeLine{55   \textcolor{comment}{// This is not required for user defined implementation}}
\DoxyCodeLine{56   \textcolor{keyword}{virtual} std::unique\_ptr<TypeErasureInterface> \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_a4f2ae55d29b2276efc752c0b55b1de08}{clone}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{57 }
\DoxyCodeLine{58 \textcolor{keyword}{private}:}
\DoxyCodeLine{59   \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_ac98d07dd8f7b70e16ccb9a01abf56b9c}{boost::serialization::access}};}
\DoxyCodeLine{60   \textcolor{keyword}{friend} \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1Serialization}{tesseract\_common::Serialization}};}
\DoxyCodeLine{61   \textcolor{keyword}{template} <\textcolor{keyword}{class} Archive>}
\DoxyCodeLine{62   \textcolor{keywordtype}{void} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface_ac969a0de9cb3ccbd8f3268608cfcc0b3}{serialize}}(Archive\& \textcolor{comment}{/*ar*/}, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \textcolor{comment}{/*version*/})\{\};  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{63 \};}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{keyword}{template} <\textcolor{keyword}{typename} ConcreteType, \textcolor{keyword}{typename} Interface>}
\DoxyCodeLine{66 \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance}{TypeErasureInstance}} : Interface}
\DoxyCodeLine{67 \{}
\DoxyCodeLine{68   \textcolor{keyword}{using }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ac9e01156a1f3a92ef3693db3938b4172}{ValueType}} = ConcreteType;}
\DoxyCodeLine{69   \textcolor{keyword}{using }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_af51cd9c867086327eec25d43ab79ea02}{InterfaceType}} = Interface;}
\DoxyCodeLine{70 }
\DoxyCodeLine{71   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_a4256824e49b1c6c83b9d130bee346597}{TypeErasureInstance}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{72 }
\DoxyCodeLine{73   \textcolor{keyword}{explicit} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_adb7177b9c0e19a8f87ad79f4bc768366}{TypeErasureInstance}}(ConcreteType value) : \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}}(std::move(value)) \{\}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75   \textcolor{keyword}{explicit} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_addc097be949f25c53cacdf23209b3d5b}{TypeErasureInstance}}(ConcreteType\&\& value) : \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}}(std::move(value)) \{\}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77   \textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ac9e01156a1f3a92ef3693db3938b4172}{ValueType}}\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_a92d9347970e1fe0a23a4e9adb3586f39}{get}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}}; \}}
\DoxyCodeLine{78 }
\DoxyCodeLine{79   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ac9e01156a1f3a92ef3693db3938b4172}{ValueType}}\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ae913bb6d97a41c615219cfe6539b1cc8}{get}}() \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}}; \}}
\DoxyCodeLine{80 }
\DoxyCodeLine{81   \textcolor{keywordtype}{void}* \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_aa321fcfc4c5cfa86ae129d39e3f1b872}{recover}}() final \{ \textcolor{keywordflow}{return} \&\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}}; \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83   \textcolor{keyword}{const} \textcolor{keywordtype}{void}* \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_a07c8773ea5075934d6558da0480f61bd}{recover}}() const final \{ \textcolor{keywordflow}{return} \&\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}}; \}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85   std::type\_index \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ad7aa3bfe59e9275de907079fddc83fda}{getType}}() const final \{ \textcolor{keywordflow}{return} std::type\_index(\textcolor{keyword}{typeid}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ac9e01156a1f3a92ef3693db3938b4172}{ValueType}})); \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87   \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_aaf65deb4089b6cd5d355e8729cba9ceb}{equals}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface}{TypeErasureInterface}}\& other) \textcolor{keyword}{const} \textcolor{keyword}{final}}
\DoxyCodeLine{88   \{}
\DoxyCodeLine{89     \textcolor{keywordflow}{return} this-\/>\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ad7aa3bfe59e9275de907079fddc83fda}{getType}}() == other.getType() \&\& this-\/>\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_a92d9347970e1fe0a23a4e9adb3586f39}{get}}() == *\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ac9e01156a1f3a92ef3693db3938b4172}{ValueType}}*\textcolor{keyword}{>}(other.recover());}
\DoxyCodeLine{90   \}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92   ConcreteType \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}};}
\DoxyCodeLine{93 }
\DoxyCodeLine{94 \textcolor{keyword}{private}:}
\DoxyCodeLine{95   \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ac98d07dd8f7b70e16ccb9a01abf56b9c}{boost::serialization::access}};}
\DoxyCodeLine{96   \textcolor{keyword}{friend} \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1Serialization}{tesseract\_common::Serialization}};}
\DoxyCodeLine{97   \textcolor{keyword}{template} <\textcolor{keyword}{class} Archive>}
\DoxyCodeLine{98   \textcolor{keywordtype}{void} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_acb6db9409bc60d3d5adae586ed3b3631}{serialize}}(Archive\& ar, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \textcolor{comment}{/*version*/})  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{99   \{}
\DoxyCodeLine{100     \textcolor{comment}{// If this line is removed a exception is thrown for unregistered cast need to too look into this.}}
\DoxyCodeLine{101     ar\& boost::serialization::make\_nvp(\textcolor{stringliteral}{"{}base"{}}, boost::serialization::base\_object<Interface>(*\textcolor{keyword}{this}));}
\DoxyCodeLine{102     ar\& boost::serialization::make\_nvp(\textcolor{stringliteral}{"{}impl"{}}, \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstance_ab5ba5d5d4c5757a904907e762d7c7a83}{value\_}});}
\DoxyCodeLine{103   \}}
\DoxyCodeLine{104 \};}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{keyword}{template} <\textcolor{keyword}{typename} F>}
\DoxyCodeLine{107 \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper}{TypeErasureInstanceWrapper}} : F  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{108 \{}
\DoxyCodeLine{109   \textcolor{keyword}{using }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_aad512785444ebb9bca421a7aa64da36a}{ValueType}} = \textcolor{keyword}{typename} F::ValueType;}
\DoxyCodeLine{110   \textcolor{keyword}{using }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_acc90b3067104b979fd9e16324d04c5df}{InterfaceType}} = \textcolor{keyword}{typename} F::InterfaceType;}
\DoxyCodeLine{111 }
\DoxyCodeLine{112   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_ac08c51ea7f9193ed946d4e74f2fbca9a}{TypeErasureInstanceWrapper}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{113   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_af070cf0ef9046c86ff0adc36be54475e}{TypeErasureInstanceWrapper}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_aad512785444ebb9bca421a7aa64da36a}{ValueType}}\& x) : F(x) \{\}}
\DoxyCodeLine{114   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_a91011b59a18b3de7d664a3377a0d78c5}{TypeErasureInstanceWrapper}}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper}{TypeErasureInstanceWrapper}}\&\& x) noexcept : F(std::move(x)) \{\}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116   std::unique\_ptr<TypeErasureInterface> \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_a6ebad538ed166257c875826917e92d5b}{clone}}() const final}
\DoxyCodeLine{117   \{}
\DoxyCodeLine{118     \textcolor{keywordflow}{return} std::make\_unique<TypeErasureInstanceWrapper<F>>(this-\/>get());}
\DoxyCodeLine{119   \}}
\DoxyCodeLine{120 }
\DoxyCodeLine{121 \textcolor{keyword}{private}:}
\DoxyCodeLine{122   \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_ac98d07dd8f7b70e16ccb9a01abf56b9c}{boost::serialization::access}};}
\DoxyCodeLine{123   \textcolor{keyword}{friend} \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1Serialization}{tesseract\_common::Serialization}};}
\DoxyCodeLine{124   \textcolor{keyword}{template} <\textcolor{keyword}{class} Archive>}
\DoxyCodeLine{125   \textcolor{keywordtype}{void} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper_a4f361f05a15435e302c5f3321d897a18}{serialize}}(Archive\& ar, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \textcolor{comment}{/*version*/})  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{126   \{}
\DoxyCodeLine{127     \textcolor{comment}{// If this line is removed a exception is thrown for unregistered cast need to too look into this.}}
\DoxyCodeLine{128     ar\& boost::serialization::make\_nvp(\textcolor{stringliteral}{"{}base"{}}, boost::serialization::base\_object<F>(*\textcolor{keyword}{this}));}
\DoxyCodeLine{129   \}}
\DoxyCodeLine{130 \};}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Interface, \textcolor{keyword}{template} <\textcolor{keyword}{typename}> \textcolor{keyword}{class }Instance>}
\DoxyCodeLine{133 \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}}
\DoxyCodeLine{134 \{}
\DoxyCodeLine{135 \textcolor{keyword}{private}:}
\DoxyCodeLine{136   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{137   \textcolor{keyword}{using }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_af3c055f092ec883c3023ae8723df8c09}{uncvref\_t}} = std::remove\_cv\_t<typename std::remove\_reference<T>::type>;}
\DoxyCodeLine{138 }
\DoxyCodeLine{139   \textcolor{comment}{// Enable the generic ctor only if ``T`` is not a ForwardKinematics (after removing const/reference qualifiers)}}
\DoxyCodeLine{140   \textcolor{comment}{// If ``T`` is of type ForwardKinematics we disable so it will use the copy or move constructors of this class.}}
\DoxyCodeLine{141   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{142   \textcolor{keyword}{using }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a44d7d3a3eab622f2599e247931e4896c}{generic\_ctor\_enabler}} = std::enable\_if\_t<!std::is\_base\_of<TypeErasureBase, uncvref\_t<T>>::value, \textcolor{keywordtype}{int}>;}
\DoxyCodeLine{143 }
\DoxyCodeLine{144 \textcolor{keyword}{public}:}
\DoxyCodeLine{145   \textcolor{keyword}{using }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a14db1891b1edb6af862a8b156a03dbdb}{InterfaceType}} = Interface;}
\DoxyCodeLine{146 }
\DoxyCodeLine{147   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{generic}\_ctor\_enabler<T> = 0>}
\DoxyCodeLine{148   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_aa0cce17aaebf12126df8d5bc48b50703}{TypeErasureBase}}(T\&\& value)  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{149     : \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}(std::make\_unique<\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInstanceWrapper}{TypeErasureInstanceWrapper}}<Instance<\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_af3c055f092ec883c3023ae8723df8c09}{uncvref\_t}}<T>>>>(value))}
\DoxyCodeLine{150   \{}
\DoxyCodeLine{151   \}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_adf4fab08807489fd754390624d827818}{TypeErasureBase}}() : \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}(nullptr)\{\};  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{154 }
\DoxyCodeLine{155   \textcolor{comment}{// Destructor}}
\DoxyCodeLine{156   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a042b04f172b3f2fb14ea41714abb4da7}{\string~TypeErasureBase}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{157 }
\DoxyCodeLine{158   \textcolor{comment}{// Copy constructor}}
\DoxyCodeLine{159   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ab5c54a4ae1fb2eb2e8afa102822baeae}{TypeErasureBase}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\& other) \{ \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}} = other.\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}-\/>clone(); \}}
\DoxyCodeLine{160 }
\DoxyCodeLine{161   \textcolor{comment}{// Move ctor.}}
\DoxyCodeLine{162   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a07cb6d77988929ccc1e2ef0db27725aa}{TypeErasureBase}}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\&\& other) \textcolor{keyword}{noexcept} \{ \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}.swap(other.value\_); \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164   \textcolor{comment}{// Move assignment.}}
\DoxyCodeLine{165   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a5248011d7daf177a149f67f2feae0b3a}{operator=}}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\&\& other) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{166   \{}
\DoxyCodeLine{167     \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}.swap(other.value\_);}
\DoxyCodeLine{168     \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});}
\DoxyCodeLine{169   \}}
\DoxyCodeLine{170 }
\DoxyCodeLine{171   \textcolor{comment}{// Copy assignment.}}
\DoxyCodeLine{172   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a234be4ebf105099d89bf73d805bbfbc5}{operator=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\& other)}
\DoxyCodeLine{173   \{}
\DoxyCodeLine{174     (*this) = \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_adf4fab08807489fd754390624d827818}{TypeErasureBase}}(other);}
\DoxyCodeLine{175     \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});}
\DoxyCodeLine{176   \}}
\DoxyCodeLine{177 }
\DoxyCodeLine{178   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T, \textcolor{keyword}{generic}\_ctor\_enabler<T> = 0>}
\DoxyCodeLine{179   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ace827a6887cd457884a95a2452fde301}{operator=}}(T\&\& other)}
\DoxyCodeLine{180   \{}
\DoxyCodeLine{181     (*this) = \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_adf4fab08807489fd754390624d827818}{TypeErasureBase}}(std::forward<T>(other));}
\DoxyCodeLine{182     \textcolor{keywordflow}{return} (*\textcolor{keyword}{this});}
\DoxyCodeLine{183   \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185   std::type\_index \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ac3714363cd2bfc7bb38f0f64f980b28f}{getType}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{186 \textcolor{keyword}{  }\{}
\DoxyCodeLine{187     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}} == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{188       \textcolor{keywordflow}{return} std::type\_index(\textcolor{keyword}{typeid}(\textcolor{keyword}{nullptr}));}
\DoxyCodeLine{189 }
\DoxyCodeLine{190     \textcolor{keywordflow}{return} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}-\/>getType();}
\DoxyCodeLine{191   \}}
\DoxyCodeLine{192 }
\DoxyCodeLine{193   \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a1151314f2a745949e79d4afa106cb6a6}{operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\& rhs)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}-\/>equals(*rhs.\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}); \}}
\DoxyCodeLine{194 }
\DoxyCodeLine{195   \textcolor{keywordtype}{bool} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a585d2f5ad7e10970092355c544742eae}{operator!=}}(\textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase}{TypeErasureBase}}\& rhs)\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} !\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a1151314f2a745949e79d4afa106cb6a6}{operator==}}(rhs); \}}
\DoxyCodeLine{196 }
\DoxyCodeLine{197   \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a14db1891b1edb6af862a8b156a03dbdb}{InterfaceType}}\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ab8d147b949d08f3e378ce1edaa877522}{interface}}() \{ \textcolor{keywordflow}{return} *\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a14db1891b1edb6af862a8b156a03dbdb}{InterfaceType}}*\textcolor{keyword}{>}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}.get()); \}}
\DoxyCodeLine{198 }
\DoxyCodeLine{199   \textcolor{keyword}{const} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a14db1891b1edb6af862a8b156a03dbdb}{InterfaceType}}\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ac60dd7595195029ef9ececdb10b77c4c}{interface}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} *\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a14db1891b1edb6af862a8b156a03dbdb}{InterfaceType}}*\textcolor{keyword}{>}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}.get()); \}}
\DoxyCodeLine{200 }
\DoxyCodeLine{201   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{202   T\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ad62906529725ec9857273ff50cdbc08b}{as}}()}
\DoxyCodeLine{203   \{}
\DoxyCodeLine{204     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ac3714363cd2bfc7bb38f0f64f980b28f}{getType}}() != \textcolor{keyword}{typeid}(T))}
\DoxyCodeLine{205       \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}TypeErasureBase, tried to cast '"{}} + std::string(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ac3714363cd2bfc7bb38f0f64f980b28f}{getType}}().name()) + \textcolor{stringliteral}{"{}' to '"{}} +}
\DoxyCodeLine{206                                std::string(\textcolor{keyword}{typeid}(T).name()) + \textcolor{stringliteral}{"{}'!"{}});}
\DoxyCodeLine{207 }
\DoxyCodeLine{208     \textcolor{keyword}{auto}* p = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_af3c055f092ec883c3023ae8723df8c09}{uncvref\_t<T>}}*\textcolor{keyword}{>}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}-\/>recover());}
\DoxyCodeLine{209     \textcolor{keywordflow}{return} *p;}
\DoxyCodeLine{210   \}}
\DoxyCodeLine{211 }
\DoxyCodeLine{212   \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{213   \textcolor{keyword}{const} T\& \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a17d29af667b6d6d1e8a8fb49bc36a501}{as}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{214 \textcolor{keyword}{  }\{}
\DoxyCodeLine{215     \textcolor{keywordflow}{if} (\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ac3714363cd2bfc7bb38f0f64f980b28f}{getType}}() != \textcolor{keyword}{typeid}(T))}
\DoxyCodeLine{216       \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"{}TypeErasureBase, tried to cast '"{}} + std::string(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ac3714363cd2bfc7bb38f0f64f980b28f}{getType}}().name()) + \textcolor{stringliteral}{"{}' to '"{}} +}
\DoxyCodeLine{217                                std::string(\textcolor{keyword}{typeid}(T).name()) + \textcolor{stringliteral}{"{}'!"{}});}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     \textcolor{keyword}{const} \textcolor{keyword}{auto}* p = \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_af3c055f092ec883c3023ae8723df8c09}{uncvref\_t<T>}}*\textcolor{keyword}{>}(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}}-\/>recover());}
\DoxyCodeLine{220     \textcolor{keywordflow}{return} *p;}
\DoxyCodeLine{221   \}}
\DoxyCodeLine{222 }
\DoxyCodeLine{223 \textcolor{keyword}{private}:}
\DoxyCodeLine{224   \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_ac98d07dd8f7b70e16ccb9a01abf56b9c}{boost::serialization::access}};}
\DoxyCodeLine{225   \textcolor{keyword}{friend} \textcolor{keyword}{struct }\mbox{\hyperlink{structtesseract__common_1_1Serialization}{tesseract\_common::Serialization}};}
\DoxyCodeLine{226 }
\DoxyCodeLine{227   \textcolor{keyword}{template} <\textcolor{keyword}{class} Archive>}
\DoxyCodeLine{228   \textcolor{keywordtype}{void} \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a0bcd13c4850a204a85935bdd5fff7feb}{serialize}}(Archive\& ar, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \textcolor{comment}{/*version*/})  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{229   \{}
\DoxyCodeLine{230     ar\& boost::serialization::make\_nvp(\textcolor{stringliteral}{"{}value"{}}, \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}});}
\DoxyCodeLine{231   \}}
\DoxyCodeLine{232 }
\DoxyCodeLine{233   std::unique\_ptr<TypeErasureInterface> \mbox{\hyperlink{structtesseract__common_1_1TypeErasureBase_a8adcc6cad0893c332a828dd8a662e5c6}{value\_}};}
\DoxyCodeLine{234 \};}
\DoxyCodeLine{235 }
\DoxyCodeLine{236 \}  \textcolor{comment}{// namespace tesseract\_common}}
\DoxyCodeLine{237 }
\DoxyCodeLine{238 BOOST\_SERIALIZATION\_ASSUME\_ABSTRACT(\mbox{\hyperlink{structtesseract__common_1_1TypeErasureInterface}{tesseract\_common::TypeErasureInterface}})}
\DoxyCodeLine{239 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// TESSERACT\_COMMON\_TYPE\_ERASURE\_H}}

\end{DoxyCode}
